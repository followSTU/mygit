<!--Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->

<!DOCTYPE html>
<html lang="zxx">

<head>
	<title>Chronicle Education Category Bootstrap Responsive website Template | Shop Catalogue :: w3layouts</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="Chronicle Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
	SmartPhone Compatible web template, free WebDesigns for Nokia, Samsung, LG, Sony Ericsson, Motorola web design" />
	<script>
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>
	<!-- Custom Theme files -->
	<link href="css/bootstrap.css" type="text/css" rel="stylesheet" media="all">
	<!-- shop css -->
	<link href="css/shop.css" type="text/css" rel="stylesheet" media="all">
	<!-- checkout css -->
	<link href="css/checkout.css" type="text/css" rel="stylesheet" media="all">
	<!-- Range-slider-css -->
	<link rel="stylesheet" type="text/css" href="css/jquery-ui1.css">
	<!-- common-css -->
	<link href="css/style.css" type="text/css" rel="stylesheet" media="all">
	<!-- font-awesome icons -->
	<link href="css/font-awesome.css" rel="stylesheet">

	<!-- //Custom Theme files -->
	<!-- online-fonts -->
	<!-- logo -->
	<link href="//fonts.googleapis.com/css?family=Fredericka+the+Great" rel="stylesheet">
	<!-- titles -->
	<link href="//fonts.googleapis.com/css?family=Merriweather+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet">
	<!-- body -->
	<link href="//fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
	<!-- //online-fonts -->
</head>


<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
	<div id="home">
		<!-- header -->
		<!-- navbar -->
		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="main-nav">
				<div class="container">

					<div class="navbar-header page-scroll">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
							<span class="sr-only">Chronicle</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<h1>
							<a class="navbar-brand" href="index.html">Chronicle</a>
						</h1>
					</div>
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse navbar-ex1-collapse nav-right">
						<ul class="nav navbar-nav navbar-left cl-effect-15">
							<!-- Hidden li included to remove active class from about link when scrolled up past about section -->
							<li class="hidden">
								<a class="page-scroll" href="#page-top"></a>
							</li>
							<li>
								<a href="#">图书馆主页</a>
							</li>
							<li class="active">
								<a href="about.html">关于我们</a>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle effect-3" data-toggle="dropdown">图书查询借阅
									<b class="caret"></b>
								</a>
								<ul class="dropdown-menu">
									<li>
										<a href="shop.html">product catalog</a>
									</li>
									<li>
										<a href="single_product.html">single product</a>
									</li>
									<li>
										<a href="checkout.html">checkout</a>
									</li>
									<li>
                                        <a href="payment.html">Payment</a>
                                    </li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle effect-3" data-toggle="dropdown">footers
									<b class="caret"></b>
								</a>
								<ul class="dropdown-menu">
									<li>
										<a href="footer.html">Default</a>
									</li>
									<li>
										<a href="footer1.html">variant1</a>
									</li>
									<li>
										<a href="footer2.html">variant2</a>
									</li>
									<li>
										<a href="footer3.html">variant3</a>
									</li>
									<li>
										<a href="footer4.html">variant4</a>
									</li>
								</ul>
							</li>
							<li>
								<a href="contact.html">Contact us</a>
							</li>
							<li>
								<a href="person.html" title="SignIn & SignUp">
									<span class="fa fa-user nav-icon" aria-hidden="true"></span>
								</a>
							</li>

						</ul>
						<!-- search-bar -->
						<div class="search-bar-agileits">
							<div class="cd-main-header">
								<ul class="cd-header-buttons">
									<li>
										<a class="cd-search-trigger" href="#cd-search">
											<span></span>
										</a>
									</li>
								</ul>
								<!-- cd-header-buttons -->
							</div>
							<div id="cd-search" class="cd-search">
								<form action="#" method="post">
									<input name="Search" type="search" placeholder="Type and Hit Enter...">
								</form>
							</div>
						</div>
						<!-- //search-bar ends here -->
						<!-- shopping cart -->
						<div class="cart-mainf">
							<div class="chrcart chrcart2 cart cart box_1">
								<form action="#" method="post" class="last">
									<input type="hidden" name="cmd" value="_cart">
									<input type="hidden" name="display" value="1">
									<button class="top_chr_cart" type="submit" name="submit" value="">
										<i class="fa fa-cart-arrow-down" aria-hidden="true"></i>
									</button>
								</form>
							</div>
						</div>
						<!-- //shopping cart ends here -->
					</div>
					<!-- /.navbar-collapse -->
					<div class="clearfix"></div>
				</div>
				<!-- /.container -->
			</div>
		</nav>
		<!-- //navbar ends here -->
		<!-- banner -->
		<div class="banner-bg-inner">
			<!-- banner-text -->
			<div class="banner-text-inner">
				<div class="container">
					<h2 class="title-inner">
						world of reading
					</h2>

				</div>
			</div>
			<!-- //banner-text -->
		</div>

		<!--//breadcrumbs ends here-->
		<!-- Shop -->
		<div class="innerf-pages section">
			<div class="container-cart">
				<!-- 图书查询 -->
				<div class="side-bar col-md-3">

					<!-- // preference -->
					<div class="search-hotel">

						<form >
							<h3 class="shopf-sear-headits-sear-head" style="background-color: #0a7362;width: 150px;border-radius: 10px">图书名称：</h3>
							<input type="search" placeholder="输入图书名称" name="bookname" id="bookname2">
							<br><br>

							<h3 class="shopf-sear-headits-sear-head" style="background-color: #0a7362;width: 150px;border-radius: 10px">图书作者：</h3>
							<input type="search" placeholder="输入图书作者" name="author" id="author2">
							<br><br>

							<h3 class="shopf-sear-headits-sear-head" style="background-color: #0a7362;width: 150px;border-radius: 10px">出版社名称：</h3>
							<select class="form-control" id="press">
								
							</select>
							<br><br>

							<h3 class="shopf-sear-headits-sear-head" style="background-color: #0a7362;width: 150px;border-radius: 10px">图书种类：</h3>
							<select class="form-control" id="booktype">
							
							</select>
							<br><br>

							<input type="button" value="查询" id="searchBook" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">


							<!-- Modal -->
							<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
											<h4 class="modal-title" id="myModalLabel">Modal title</h4>
										</div>
										<div class="modal-body " id="searchbooks">
											...
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
											<button type="button" class="btn btn-primary">Save changes</button>
										</div>
									</div>
								</div>
							</div>

						</form><br><br>
					</div>




				</div>
				<!-- //product left -->
				<!-- 图书显示 -->
				<div class="left-ads-display col-md-9" id="book_all">


				</div>

						<!-- //product-sec1 -->
						<div class="clearfix"></div>
					</div>
				</div>
				<div class="clearfix"></div>

			</div>
		</div>
		<!--// Shop -->


 <!-- footer -->
 <div class="footer-bottom section">
	<div class="container">
		<!-- newsletter -->
		<div class="subscribe-main section-w3layouts text-center">
			<h4 class="rad-txt">
				<span class="abtxt1">keep yourself</span>
				<span class="abtext">updated</span>
			</h4>
			<h5>subscribe to our newsletter to stay up-to-date with our projects.</h5>
			<div class="subscribe-form">
				<form action="#" method="post" class="subscribe_form">
					<div class="email-news">
						<input type="email" placeholder="Email" required="">
					</div>
					<div class="sub-news">
						<input type="submit" value="subscribe">
					</div>
				</form>
				<div class="clearfix"> </div>
			</div>
			<p>We respect your privacy.No spam ever!</p>
		</div>
		<!-- //newsletter ends here -->
		<!-- footer grids-->
		<div class="footer-cpy">
			<!-- footer-grid1 -->
			<div class="col-md-3 col-sm-6 footer-logo">
				<h3>
					<a href="index.html">Chronicle</a>
				</h3>
				<h4>about us</h4>
				<p>Vallis Molestie Arcu Morbi Dapibus Suscipit Ante Sit Efficitur Eu estie Arcu Mor Anestie Ate Vesti.</p>
			</div>
			<!-- //footer-grid1 -->
			<!-- footer-grid2 -->
			<div class="col-md-3 col-sm-6 footer-nav text-center">
				<h4>navigation</h4>
				<ul>
					<li>
						<a href="index.html">Home</a>
					</li>
					<li>
						<a href="about.html">About us</a>
					</li>
					<li>
						<a href="shop.html">shop</a>
					</li>
					<li>
						<a href="contact.html">contact us</a>
					</li>
				</ul>
			</div>
			<!-- //footer-grid2 -->
			<!-- footer-grid3 -->
			<div class="col-md-3 col-sm-6 blog-footer">
				<h4>latest from blog</h4>
				<div class="blog1">
					<div class="col-md-3 col-sm-3 col-xs-2 bl1">
						<a href="#">
							<img src="images/b1.jpg" alt="" class="img-responsive" />
						</a>
					</div>
					<div class="col-md-9 col-sm-9 col-xs-10 bl2">
						<a href="#">Dapibus Suscipit Ante Sit by instagram</a>
						<p>February 15, 2018</p>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="blog1">
					<div class="col-md-3 col-sm-3 col-xs-2 bl1">
						<a href="#">
							<img src="images/b2.jpg" alt="" class="img-responsive" />
						</a>
					</div>
					<div class="col-md-9 col-sm-9 col-xs-10 bl2">
						<a href="#">Dapibus Suscipit Ante Sit by instagram</a>
						<p>February 20, 2018</p>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			<!-- //footer-grid3 -->
			<!-- footer-grid4 -->
			<div class="col-md-3 col-sm-6 contact-foot text-right">
				<h4>contact us</h4>
				<ul>
					<li>
						<span class="fa fa-home"></span>
						1185 Burlington
						<br> Canada.
					</li>
					<li>
						<span class="fa fa-phone"></span>
						+12 345 678
					</li>
					<li>
						<span class="fa fa-envelope"></span>
						<a href="mailto:info@example.com">mail@chronicle.com</a>
					</li>
				</ul>
			</div>
			<!-- //footer-grid4 -->
			<div class="clearfix"></div>
		</div>
		<!-- //footer-grids -->
		<!-- footer social -->
		<div class="footer-social text-center">
			<h4>stay connected</h4>
			<ul>
				<li>
					<a href="#">
						<span class="fa fa-facebook icon_facebook"></span>
					</a>
				</li>
				<li>
					<a href="#">
						<span class="fa fa-twitter icon_twitter"></span>
					</a>
				</li>
				<li>
					<a href="#">
						<span class="fa fa-dribbble icon_dribbble"></span>
					</a>
				</li>
				<li>
					<a href="#">
						<span class="fa fa-google-plus icon_g_plus"></span>
					</a>
				</li>
			</ul>
		</div>
		<!-- //footer social -->
	</div>
	<!-- //footer container -->
</div>
<!-- //footer -->
<div class="cpy-right">
	<p>© 2018 Chronicle. All rights reserved | Design by
		<a href="http://w3layouts.com"> W3layouts.</a>
	</p>
</div>
</div>
<!-- //home -->
	<!-- js -->
	<!-- Common js -->
	<script src="js/jquery-2.2.3.min.js"></script>
	<!--// Common js -->
	<!-- cart-js -->
	<script src="js/minicart.js"></script>
	<script>
		chr.render();

		chr.cart.on('new_checkout', function (evt) {
			var items, len, i;

			if (this.subtotal() > 0) {
				items = this.items();

				for (i = 0, len = items.length; i < len; i++) {}
			}
		});
	</script>
	<!-- //cart-js -->
	<!-- price range (top products) -->
	<script src="js/jquery-ui.js"></script>
	<script>
		//<![CDATA[ 
		$(window).load(function () {
			$("#slider-range").slider({
				range: true,
				min: 0,
				max: 9000,
				values: [50, 6000],
				slide: function (event, ui) {
					$("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
				}
			});
			$("#amount").val("$" + $("#slider-range").slider("values", 0) + " - $" + $("#slider-range").slider("values", 1));

		}); //]]>
	</script>
	<!-- //price range (top products) -->

	<!-- dropdown nav -->
	<script>
		$(document).ready(function () {
			$(".dropdown").hover(
				function () {
					$('.dropdown-menu', this).stop(true, true).slideDown("fast");
					$(this).toggleClass('open');
				},
				function () {
					$('.dropdown-menu', this).stop(true, true).slideUp("fast");
					$(this).toggleClass('open');
				}
			);
		});
	</script>
	<!-- //dropdown nav -->
	<!--search jQuery-->
	<script src="js/main.js"></script>
	<!--search jQuery-->

	<!-- Scrolling Nav JavaScript -->
	<script src="js/scrolling-nav.js"></script>
	<!-- //fixed-scroll-nav-js -->
	<!--//scripts-->

	<script src="js/bootstrap.js"></script>
	<!-- start-smoth-scrolling -->
	<script src="js/move-top.js"></script>
	<script src="js/easing.js"></script>
	<script>
		jQuery(document).ready(function ($) {
			$(".scroll").click(function (event) {
				event.preventDefault();
				$('html,body').animate({
					scrollTop: $(this.hash).offset().top
				}, 1000);
			});
		});
	</script>
	<!-- start-smoth-scrolling -->
	<!-- here stars scrolling icon -->
	<script>
		$(document).ready(function () {

			$().UItoTop({
				easingType: 'easeOutQuart'
			});

		});
	</script>

	<!-- //here ends scrolling icon -->
	<!-- smoothscroll -->
	<script src="js/SmoothScroll.min.js"></script>
	<!-- //smoothscroll -->


	<script>

        window.onload = function () {
            //接受出版社和书架，种类的数据
            var  getbookcase= 'http://localhost:8080/libarary/getbookcase';
            var  gettype= 'http://localhost:8080/libarary/gettype';
            var  getpress= 'http://localhost:8080/libarary/getpress';
            var  getbook= 'http://localhost:8080/libarary/getbook3';
     
            bbb();
            ccc();
            showPage();
            function showPage() {
                $.ajax({
                    url: getbook,

                    type: "GET",
                    success: function (result) {
                        //显示商品数据
                        build_book_table(result)
                    }
                })
            } ;
           
            function bbb() {
                $.ajax({
                    url: gettype,
                    type: "GET",
                    success: function (result) {
                        //接受种类的数据
                        type_option(result);

                    }
                })
            } ;
            function ccc() {
                $.ajax({
                    url: getpress,
                    type: "GET",
                    success: function (result) {
                        //接受出版社的数据
                        press_option(result);
                        console.log(result)
                    }
                })
            } ;
            //接受种类的数据
            function type_option(result) {
                $("#booktype").empty();
                var types = result.data.types;
                $.each(types, function (index, item) {
                    var dataid=item.typeId;
                    var typeNameTD = $("<option data-id ="+ dataid+"></option>").append(item.typeName);
                    typeNameTD.appendTo("#booktype");
                })
            }
            //接受出版社数据
            function press_option(result) {
                $("#press").empty();
                var presses = result.data.presses;
                $.each(presses, function (index, item) {
                    var dataid=item.pressId;
                    var pressNameTD = $("<option data-id ="+ dataid+"></option>").append(item.pressName);
                    pressNameTD.appendTo("#press");
                })
            }
            var searchBook="http://localhost:8080/libarary/getbookbyparams";
            $("#searchBook").click(function () {
                var book={};
                var bookname=$("#bookname2").val();
                var author=$("#author2").val();
                if(bookname!=null && bookname!=""){
                    book.bookName=bookname;
                }
                if(author!=null && author!=""){
                    book.bookAuthor=author;
                }
               
                
                book.typeId= $("#booktype").find("option").not(function () {
                        return !this.selected
                    }).data("id");
                
                book.pressId= $("#press").find("option").not(function () {
                    return !this.selected
                }).data("id");
                    
               
                console.log(book);
                var formData=new FormData();
                formData.append("bookParam",JSON.stringify(book));
                $.ajax({
                    url:searchBook,
                    type:'POST',
                    contentType:false,
                    processData:false,
                    cash:false,
                    data:formData,
                    success:function (result) {
                        //build_book_table(result)
						search_book(result)
                    }
                })
            })

				function search_book(result) {
                    var books = result.data.books;
                    var tempPage = result.data.books.pageNum;
                    $("#searchbooks").empty();
                    $.each(books, function (index, item) {
                        var phone=item.bookImgAddr;
                        var imgTD = $("<a href='#'></a>").append("<img style='width: 100px;height: 120px;' src='"+phone+"' alt=''>");
                        var idTD = $("<h4></h4>").append(item.bookId);
                        var nameTD = $("<h4></h4>").append(item.bookName);
                        var authorTD = $("<p></p>").append("作者："+item.bookAuthor);
                        var isbnTD = $("<p></p>").append("isbn:"+item.bookIsbm);
                        var priceTD = $("<p></p>").append("图书价格："+item.bookPrice);
                        var typeNameTD = $("<p></p>").append("类别："+item.type.typeName);
                        var pressNameTD = $("<p></p>").append("出版社："+item.press.pressName);
                        var bookCaseTD = $("<p></p>").append("书架："+item.bookcase.bookcaseName);
						var bookStatusID=item.bookStatus;
						var buttenD=null;

                        if (bookStatusID!=2){
                            buttenD = $("<button type='submit' class='chr-cart pchr-cart'></button>").append("图书已借空").append(
                                $("<i></i>").addClass("fa fa-cart-plus"));
                        }else {
                            buttenD = $("<button type='submit' class='chr-cart pchr-cart'></button>").append("图书借阅").append(
                                $("<i></i>").addClass("fa fa-cart-plus"));
						}

                        var div1=$("<div class='thumbnail'></div>")
                            .append(imgTD);

                        var div2=$("<div></div>").addClass("caption")
                            .append(nameTD)
                            .append(authorTD)
                            .append(typeNameTD)
                            .append(pressNameTD)
                            .append(bookCaseTD)
                            .append(buttenD);

                        var div3=$("<div class='product-chr-info chr'></div>")
                            .append(div1)
                            .append(div2);
                        $("<div class='col-md-3 product-men'></div>")
                            .append(div3)
                            .appendTo("#searchbooks");
                    })
                }

                function build_book_table(result) {
                        //console.log("11")
                    $("#book_all").empty();
                    var books = result.data.books;
                    var tempPage = result.data.books.pageNum;
                    $.each(books, function (index, item) {
                        var phone=item.bookImgAddr;
                        var imgTD = $("<a href='#'></a>").append("<img style='width: 100px;height: 120px;' src='"+phone+"' alt=''>");
                        var idTD = $("<h4></h4>").append(item.bookId);
                        var nameTD = $("<h4></h4>").append(item.bookName);
                        var authorTD = $("<p></p>").append("作者："+item.bookAuthor);
                        var isbnTD = $("<p></p>").append("isbn:"+item.bookIsbm);
                        var priceTD = $("<p></p>").append("图书价格："+item.bookPrice);
                        var typeNameTD = $("<p></p>").append("类别："+item.type.typeName);
                        var pressNameTD = $("<p></p>").append("出版社："+item.press.pressName);
                        var bookCaseTD = $("<p></p>").append("书架："+item.bookcase.bookcaseName);
                        var bookStatusID=item.bookStatus;
                        var buttenD=null;

                        if (bookStatusID!=2){
                            buttenD = $("<button type='submit' class='chr-cart pchr-cart'></button>").append("图书已借空").append(
                                $("<i></i>").addClass("fa fa-cart-plus"));
                        }else {
                            buttenD = $("<button type='submit' class='chr-cart pchr-cart'></button>").append("图书借阅").append(
                                $("<i></i>").addClass("fa fa-cart-plus"));
                        }

                        var div1=$("<div class='thumbnail'></div>")
                            .append(imgTD);

                        var div2=$("<div></div>").addClass("caption")
                            .append(nameTD)
                            .append(authorTD)
                            .append(typeNameTD)
                            .append(pressNameTD)
                            .append(bookCaseTD)
                            .append(buttenD);

                        var div3=$("<div class='product-chr-info chr'></div>")
                            .append(div1)
                            .append(div2);
                        $("<div class='col-md-3 product-men'></div>")
                            .append(div3)
                            .appendTo("#book_all");
                    })
                }



            } ;






	</script>

</body>


</html>